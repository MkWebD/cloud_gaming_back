module.exports = {
  parser: '@typescript-eslint/parser',
  parserOptions: {
    project: 'tsconfig.json',
    tsconfigRootDir: __dirname,
    sourceType: 'module',
  },
  plugins: [
    '@typescript-eslint/eslint-plugin',
    'promise',
    'unicorn',
    'jsdoc',
    'sonarjs',
    'sort',
  ],
  extends: [
    'plugin:@typescript-eslint/recommended',
    'prettier',
    'plugin:promise/recommended',
    'plugin:unicorn/recommended',
    'plugin:jsdoc/recommended-typescript',
    'plugin:sonarjs/recommended',
    'plugin:sort/recommended',
  ],
  root: true,
  env: {
    node: true,
    jest: true,
  },
  ignorePatterns: ['.eslintrc.js', 'pgdata'],
  rules: {
    '@typescript-eslint/interface-name-prefix': 'off',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'off',
    'array-callback-return': 'error',
    'arrow-body-style': ['error', 'as-needed'],
    'arrow-parens': ['warn', 'always'],
    'arrow-spacing': ['warn', { before: true, after: true }],
    camelcase: ['off'],
    complexity: ['error', 15],
    'consistent-this': ['warn', 'self'],
    curly: ['error'],
    'dot-notation': ['warn'],
    'guard-for-in': ['off'],
    indent: ['off'],
    'linebreak-style': ['off'],
    'max-depth': ['warn', 3],
    'no-alert': ['warn'],
    'no-bitwise': ['error'],
    'no-caller': ['error'],
    'no-case-declarations': ['error'],
    'no-console': ['warn'],
    'no-control-regex': ['off'],
    'no-dupe-keys': ['error'],
    'no-else-return': ['off'],
    'no-empty-function': ['warn', { allow: ['constructors'] }],
    'no-eq-null': ['error'],
    'no-eval': ['error'],
    'no-extend-native': ['error'],
    'no-extra-bind': ['warn'],
    'no-extra-parens': ['warn', 'all'],
    'no-extra-semi': ['error'],
    'no-irregular-whitespace': 'off',
    'no-floating-decimal': ['error'],
    'no-implicit-coercion': ['error'],
    'no-implicit-globals': ['warn'],
    'no-implied-eval': ['error'],
    'no-invalid-this': ['warn'],
    'no-lone-blocks': ['error'],
    'no-magic-numbers': ['warn'],
    'no-misleading-character-class': ['error'],
    'no-mixed-operators': ['warn'],
    'no-mixed-spaces-and-tabs': ['off'],
    'no-multi-spaces': ['off'],
    'no-nested-ternary': ['error'],
    'no-new-func': ['error'],
    'no-new-wrappers': ['error'],
    'no-new': ['error'],
    'no-octal-escape': ['error'],
    'no-proto': ['error'],
    'no-prototype-builtins': ['error'],
    'no-redeclare': ['error'],
    'no-return-assign': ['error'],
    'no-return-await': ['error'],
    'no-self-compare': ['error'],
    'no-sequences': ['error'],
    'no-shadow-restricted-names': ['error'],
    'no-template-curly-in-string': ['error'],
    'no-trailing-spaces': 'off',
    'no-throw-literal': ['error'],
    'no-undef': ['error'],
    'no-undef-init': ['error'],
    'no-undefined': ['warn'],
    'no-unused-expressions': ['warn'],
    'no-use-before-define': [
      'warn',
      { functions: false, variables: true, classes: true },
    ],
    'no-useless-call': ['error'],
    'no-useless-catch': ['error'],
    'no-useless-computed-key': ['error'],
    'no-useless-concat': ['warn'],
    'no-useless-escape': ['warn'],
    'no-useless-return': ['error'],
    'prefer-arrow-callback': ['warn'],
    radix: ['error'],
    semi: ['warn', 'always'],
    'template-curly-spacing': ['off', 'never'],
    'wrap-iife': ['error', 'inside'],

    // Promise plugin rules
    'promise/always-return': 'warn',
    'promise/no-return-wrap': 'warn',
    'promise/param-names': 'error',
    'promise/catch-or-return': 'warn',
    'promise/no-native': 'off',
    'promise/no-nesting': 'warn',
    'promise/no-promise-in-callback': 'warn',
    'promise/no-callback-in-promise': 'warn',
    'promise/avoid-new': 'off',
    'promise/no-new-statics': 'error',
    'promise/no-return-in-finally': 'warn',
    'promise/valid-params': 'warn',

    // Unicorn plugin rules
    'unicorn/empty-brace-spaces': 'off',
    'unicorn/prefer-top-level-await': 'off',
    'unicorn/no-null': 'off',
    'unicorn/no-array-callback-reference': 'off',
    'unicorn/prefer-optional-catch-binding': 'warn',

    // JSDOC validation
    'jsdoc/check-alignment': ['warn'], // Recommended
    'jsdoc/check-param-names': ['warn'], // Recommended
    'jsdoc/check-property-names': ['off'],
    'jsdoc/check-tag-names': ['warn', { definedTags: ['link'] }], // Recommended
    'jsdoc/check-types': ['warn'], // Recommended
    'jsdoc/check-values': ['off'],
    'jsdoc/empty-tags': ['warn'],
    'jsdoc/implements-on-classes': ['warn'], // Recommended
    'jsdoc/no-defaults': ['off'],
    'jsdoc/no-undefined-types': ['off'], // Recommended
    'jsdoc/require-jsdoc': ['warn'], // Recommended
    'jsdoc/require-param': ['warn'], // Recommended
    'jsdoc/require-param-description': ['off'], // Recommended
    'jsdoc/require-param-name': ['warn'], // Recommended
    'jsdoc/require-param-type': ['off'], // Recommended
    'jsdoc/require-property-description': ['off'],
    'jsdoc/require-returns': ['warn'], // Recommended
    'jsdoc/require-returns-check': ['warn'], // Recommended
    'jsdoc/require-returns-type': ['off'], // Recommended
    'jsdoc/valid-types': ['warn'], // Recommended
  },
};
